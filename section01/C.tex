If x^2 + ny^2 = 0 mod p, then gcd(y,p) = 1. Why?

x^2 + ny^2 = kp. If p divides y, then p would also divide x,
contradicting gcd(x,y)=1.

Furthermore, this means y has an inverse and

(xy^-1)^2 = -n mod p, so -n is a quadratic residue mod p.

On the other hand, if -n = x^2 mod p for some x, p | x^2+n*1^2.

I don't understand how the 4n thing leads to the same conditions as 1.1... ok now I get it. the moduli in n=1 and 2 already are multiples of 4, and we can change the p=1 mod 3 condition into p = 1, 4, 7, 10 mod 12. Except 4 and 10 are not coprime with 12 so we get p=1, 7 mod 12 and this agrees with Euler's conjecture about (-3/p). It seems like the 4 essentially comes from (-1/p) and is the smallest factor needed to write the conditions on p in a unified way for all n.

------------------------------------------------------

As an aside, I wanted to come up with proofs I liked for (-1/p) and (2/p). These follow from Euler's criterion, which is proved like this:

  Take a != 0 in F_p, p prime and let g be a primitive element of F_p.

  If (a/p) = 1, then a = g^{2i} for some i.
  a^((p-1)/2) = (g^(2i))^((p-1)/2) = (g^(p-1))^i = 1.

  Conversely, suppose a^((p-1)/2) = 1 and take j st a = g^j.
  Then g^(j*(p-1)/2) = 1 which forces j to be even. Then a = g^2i = (g^i)^2 for some i, so (a/p) = 1.

  The cases (a/p) = -1 or 0 follow immediately. Thus (a/p) = a^((p-1)/2).

In particular, a=-1 yields (-1/p) = (-1)^((p-1)/2) = 1 iff p=1 mod 4.

For a=2, we can use the simple proof in Serre if we know that an algebraic closure exists (or splitting field).

Alternatively, fix an odd positive number n = 2k+1 and denote {i in N | 1\leq i\leq k} by [k].
Define f:[k]->[k] by f(i) = i/2 if i even, (n-i)/2 if i odd.
f is surjective since if i\leq k/2, f(2i) = i (and 2i\leq k)
                      if i > k/2, f(n-2i) = i (and n-2i < n-k = k+1)
but this means f is bijective since domain and codomain are the same.
Thus, Prod(i, 1, k, f(i)) = k!
Also, Prod(i, 1, k, (-1)^i 2f(i)) = (-1)^((k^2 + k)/2) 2^k k!.
Finally, (-1)^i 2f(i) = i mod n, so (-1)^((k^2 + k)/2) 2^k k! = k! mod n.
When n is prime, we can cancel k! and simplify to
2^((n-1)/2) = (-1)^((n^2 - 1)/8) mod n which tells us (2/n) = 1 iff n = 1, 7 mod 8.

For a=3, Serre's proof works almost exactly the same since if b is a primitive 12th root of unity, b^4-b^2+1=0 so b^2 + b^-2 = 1. Thus if x=(b + b^-1), x^2 = 3 and the proof procedes the same way.

-------------------------------------------------

For an odd prime p, define p* to be (-1)^((p-1)/2) p. So if p = 1 mod 4, p* = p. If p = 3 mod 4, p* = -p.

Assume quadratic reciprocity, and consider (p*/q) for distinct primes p & q.

If p = 1 mod 4, (p*/q) = (p/q), but QR says (p/q)(q/p) = (-1)^(int*(q-1)) = 1.
  In other words, (p/q) and (q/p) are equal, so (p*/q) = (q/p).
If p = 3 mod 4, (p*/q) = (-p/q) = (-1/q)(p/q). QR says
  (p/q)(q/p) = (-1)^(odd * (q-1)/2)
             = (-1/q)^odd
             = (-1/q).
  So (-p/q) = (p/q)(q/p)(p/q) by substitution
            = (q/p). In both cases (p*/q) = (q/p).

Conversely, assume (p*/q) = (q/p).
Then (p/q)(q/p) = (p/q)(p*/q)
                = (p/q)(p/q)(-1/q)^((p-1)/2)
                = 1*((-1)^((q-1)/2))^((p-1)/2)
                = (-1)^(((q-1)/2) * ((p-1)/2))
which is the original statement of QR.

We've proved QR <=> (p*/q) = (q/p).
In other words, QR is equiv. to (p*/q) = 1 <=> (q/p) = 1.

Let us now prove (p*/q) = 1 <=> p = +-b^2 mod 4q for some odd b.

If (p*/q) = 1, exists x such that p* = x^2 mod q. If x is odd,
let b = x, otherwise b = x+q. Then b is odd, b^2 = 1 mod 4, and
p* = b^2 mod q.
  If p = 1(4), p - b^2 = 0 mod 4, so p = b^2 mod 4q.
  If p = 3(4), p + b^2 = 0 mod 4, so p = -b^2 mod 4q.

Conversely, if there exists odd b such that
p = +-b^2 mod 4q, then
p = +-b^2 mod 4 and p = +-b^2 mod q.
Since b is odd, b^2 = 1 mod 4 and -b^2 = 3 mod 4.
Thus, if p = b^2 mod q, then p* = p and (p*/q) = 1.
If p = -b^2 mod q, then p* = -p and again (p*/q) = 1.
